#SET{mots,#ARRAY}
<BOUCLE_mots(DATA){source tableau, #LISTE{themes,organisations}}>
[(#ENV{#VALEUR}|oui)#SET{mots,#GET{mots}|push{#ENV{#VALEUR}}]
</BOUCLE_mots>

<div class="formulaire_spip formulaire_recherche_tutos" id="formulaire_recherche_tutos">
	<form action="[(#ENV{action})]#formulaire_recherche_tutos" method="get">
		<div>
			<div class="editer-groupe">
				[(#ENV{action}|form_hidden)]

				[(#SAISIE{input,recherche,label=<:spip:info_rechercher:>})]

				[(#SAISIE{checkbox,recherche_avancee,
					label=<:tutotheque:fieldset_recherche_avancee_label:>,
					data=#ARRAY{oui,<:ecrire:item_oui:>}
				})]


				<INCLURE{
					fond=formulaires/inc-recherche_tutos_mots,
					env,
					ajax=recherche_mots}/>



				<p class="boutons">
					<input type="submit" class="submit" value="<:info_rechercher:>" />
				</p>
			</div>
			[(#REM) tutos trouv√©s ]
			<INCLURE{fond=inclure/tutos,env,ajax}/>
		</div>
	</form>
</div>

<script type="text/javascript">
		var champRechercheAvancee  = document.querySelector('.editer_recherche_avancee input');
		champRechercheAvancee.addEventListener('click', function(event) {

		var criteres = [(#ENV{_criteres}|json_encode)]
		var args = {
			_criteres: criteres,
		};

		var mots = [];
		$.each(criteres, function(index, critere) {
			var valeur = $('#champ_' + critere).val();
			if (valeur !== "") {
				args[critere] = valeur;
			}
		});

		args.mots = mots;
			args.recherche_avancee = [];
			if ($(this).is(':checked')) {
				args.recherche_avancee = [$(this).val()];
			}

			ajaxReload('recherche_mots', {
				args : args,
				cache : false
			});
		event.stopPropagation();
		},true);


</script>

